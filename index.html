<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base64 Redirector</title>
</head>
<body>
    <h1>Base64 Redirector</h1>
    <input type="text" id="base64Input" placeholder="Base64 문자열을 입력하세요" size="50">
    <button onclick="decodeAndRedirect()">디코딩 및 리다이렉트</button>

    <script>
        function decodeAndRedirect() {
            const base64Input = document.getElementById('base64Input').value;
            try {
                const decodedString = atob(base64Input);
                // URL 정규식으로 유효성 검사
                const urlPattern = new RegExp('^(https?:\/\/)?'+ // protocol
                    '((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|'+ // domain name
                    '((\d{1,3}\.){3}\d{1,3}))'+ // OR ip (v4) address
                    '(\:\d+)?(\/[-a-z\d%_.~+]*)*'+ // port and path
                    '(\?[;&a-z\d%_.~+=-]*)?'+ // query string
                    '(\#[-a-z\d_]*)?$','i'); // fragment locator
                if (urlPattern.test(decodedString)) {
                    // 유효한 URL인 경우, http/https를 붙여서 리다이렉트
                    if (decodedString.startsWith('http')) {
                        window.location.href = decodedString;
                    } else {
                        window.location.href = 'http://' + decodedString;
                    }
                } else {
                    alert('디코딩된 문자열이 유효한 URL이 아닙니다.');
                }
            } catch (e) {
                alert('유효하지 않은 Base64 문자열입니다.');
            }
        }
    </script>
</body>
</html>